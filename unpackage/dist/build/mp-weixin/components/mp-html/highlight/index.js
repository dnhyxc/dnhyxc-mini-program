"use strict";const e=require("./prism.min.js"),r=require("../parser.js");function t(e){this.vm=e}t.prototype.onParse=function(t,s){if("pre"===t.name){if(s.options.editable)return void(t.attrs.class=(t.attrs.class||"")+" hl-pre");let i;for(i=t.children.length;i--&&"code"!==t.children[i].name;);if(-1===i)return;const n=t.children[i];let l,a=n.attrs.class+" "+t.attrs.class;for(i=a.indexOf("language-"),-1===i?(i=a.indexOf("lang-"),-1===i?(a="language-text",i=9):i+=5):i+=9,l=i;l<a.length&&" "!==a[l];l++);const c=a.substring(i,l);if(n.children.length){const s=this.vm.getText(n.children).replace(/&amp;/g,"&");if(!s)return;t.c&&(t.c=void 0),e.Prism.languages[c]&&(n.children=new r.Parser(this.vm).parse("<pre>"+e.Prism.highlight(s,e.Prism.languages[c],c).replace(/token /g,"hl-")+"</pre>")[0].children),t.attrs.class="hl-pre",n.attrs.class="hl-code"}}},exports.Highlight=t;
