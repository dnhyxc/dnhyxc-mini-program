{"version":3,"file":"index.js","sources":["pages/code/index.vue","pages/code/index.vue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"code-wrap\">\r\n\t\t<div v-if=\"codeStore.loading\" class=\"loading\">\r\n\t\t\t<u-loading-icon vertical size=\"38\" text=\"正在加载中\" color=\"#5782ff\"></u-loading-icon>\r\n\t\t</div>\r\n\t\t<u-list lowerThreshold=\"10\" @scrolltolower=\"scrolltolower\">\r\n\t\t\t<u-list-item v-for=\"(item, index) in codeStore.codeList\" :key=\"index\">\r\n\t\t\t\t<u-cell :title=\"item.title\" @click=\"toDetail(item)\">\r\n\t\t\t\t</u-cell>\r\n\t\t\t</u-list-item>\r\n\t\t\t<div v-if=\"noMore\" class=\"no-more\">没有更多了</div>\r\n\t\t</u-list>\r\n\t</view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n\timport { onMounted, computed } from 'vue';\r\n\timport { useCodeStore } from '../../stores/code'\r\n\timport { CodeItem } from '../../typings';\r\n\r\n\tconst codeStore = useCodeStore()\r\n\r\n\tconst noMore = computed(() => {\r\n\t\tconst { total, codeList, pageSize } = codeStore\r\n\t\treturn codeList.length >= total && codeList.length && total > pageSize\r\n\t})\r\n\r\n\tonMounted(() => {\r\n\t\tloadMore();\r\n\t})\r\n\r\n\tconst scrolltolower = () => {\r\n\t\tloadMore();\r\n\t}\r\n\r\n\tconst loadMore = async () => {\r\n\t\tawait codeStore.getCodeList()\r\n\t}\r\n\r\n\tconst toDetail = (item : CodeItem) => {\r\n\t\t// @ts-ignore\r\n\t\tuni.navigateTo({\r\n\t\t\turl: `/pages/codesnippet/index?id=${item.id}` // 注意斜杠开头\r\n\t\t});\r\n\t}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\t@import '@/styles/index.scss';\r\n\r\n\t.code-wrap {\r\n\t\tposition: relative;\r\n\t\tpadding: 0 10px;\r\n\t\tbox-sizing: border-box;\r\n\t\tbackground-color: $bg;\r\n\t\tmin-height: 100vh;\r\n\r\n\t\t.loading {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 0;\r\n\t\t\tleft: 0;\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100vh;\r\n\t\t\tbackground-color: rgba(0, 0, 0, 0.1);\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\r\n\t\t\t:deep {\r\n\t\t\t\t.u-loading-icon__text {\r\n\t\t\t\t\tfont-size: 18px !important;\r\n\t\t\t\t\tcolor: #5782ff !important;\r\n\t\t\t\t\tmargin-top: 15px !important;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.code-item {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tpadding: 10px 0;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\tborder-bottom: 1px solid red;\r\n\r\n\t\t\t.info {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\r\n\t\t\t\t.title {\r\n\t\t\t\t\tfont-size: 16px;\r\n\t\t\t\t\tfont-weight: 700;\r\n\t\t\t\t\t@include ellipsis;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.no-more {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 38px;\r\n\t\t\tcolor: #666;\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from '/Users/dnhyxc/Documents/miniprogram/dnhyxc/pages/code/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["useCodeStore","computed","onMounted","uni"],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBC,UAAM,YAAYA,YAAAA;AAEZ,UAAA,SAASC,cAAAA,SAAS,MAAM;AAC7B,YAAM,EAAE,OAAO,UAAU,SAAA,IAAa;AACtC,aAAO,SAAS,UAAU,SAAS,SAAS,UAAU,QAAQ;AAAA,IAAA,CAC9D;AAEDC,kBAAAA,UAAU,MAAM;AACN;IAAA,CACT;AAED,UAAM,gBAAgB,MAAM;AAClB;IAAA;AAGV,UAAM,WAAW,YAAY;AAC5B,YAAM,UAAU;IAAY;AAGvB,UAAA,WAAW,CAAC,SAAoB;AAErCC,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,+BAA+B,KAAK,EAAE;AAAA;AAAA,MAAA,CAC3C;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1CH,GAAG,WAAW,eAAe;"}