{"version":3,"file":"index.js","sources":["pages/code/index.vue","pages/code/index.vue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"code-wrap\">\r\n\t\t<div v-if=\"codeStore.loading\" class=\"loading\">\r\n\t\t\t<u-loading-icon vertical size=\"38\" text=\"正在加载中\" color=\"#5782ff\"></u-loading-icon>\r\n\t\t</div>\r\n\t\t<div class=\"search\">\r\n\t\t\t<u-search v-model=\"keyword\" placeholder=\"输入标题搜索\" shape=\"square\" height=\"40px\" :clearabled=\"true\"\r\n\t\t\t\t:showAction=\"false\" @search=\"onSearch\" @clear=\"onClear\"></u-search>\r\n\t\t\t<div class=\"code-type-list\">\r\n\t\t\t\t<div v-for=\"item in codeTypes\" :key=\"item.key\" class=\"code-type-item\">\r\n\t\t\t\t\t<div :class=\"`code-type ${langType === item.value ? 'active' : ''}`\" @click=\"onActive(item)\">\r\n\t\t\t\t\t\t{{ item.key }}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<u-list lowerThreshold=\"10\" height=\"calc(100vh - 95px)\" :enable-flex=\"true\" @scrolltolower=\"scrolltolower\">\r\n\t\t\t<u-list-item v-for=\"(item, index) in codeStore.codeList\" :key=\"index\">\r\n\t\t\t\t<div class=\"code-item\" @click=\"toDetail(item)\">\r\n\t\t\t\t\t<div class=\"info\">\r\n\t\t\t\t\t\t<div class=\"title-text\">{{ item.title }}</div>\r\n\t\t\t\t\t\t<div class=\"language\">{{ item.language }}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</u-list-item>\r\n\t\t\t<div v-if=\"noMore\" class=\"no-more\">没有更多了</div>\r\n\t\t</u-list>\r\n\t</view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n\timport { ref, onMounted, computed, onUnmounted } from \"vue\";\r\n\timport { useCodeStore } from \"../../stores/code\";\r\n\timport { CodeItem } from \"../../typings\";\r\n\r\n\tconst codeStore = useCodeStore();\r\n\r\n\tconst keyword = ref(\"\");\r\n\tconst langType = ref(\"\");\r\n\r\n\tconst codeTypes = [\r\n\t\t{\r\n\t\t\tkey: \"全部\",\r\n\t\t\tvalue: \"\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"html\",\r\n\t\t\tvalue: \"html\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"js\",\r\n\t\t\tvalue: \"javascript\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"python\",\r\n\t\t\tvalue: \"python\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"c\",\r\n\t\t\tvalue: \"c\",\r\n\t\t},\r\n\t];\r\n\r\n\tconst noMore = computed(() => {\r\n\t\tconst { total, codeList, pageSize } = codeStore;\r\n\t\treturn codeList.length >= total && codeList.length && total > pageSize;\r\n\t});\r\n\r\n\tonMounted(() => {\r\n\t\tloadMore();\r\n\t});\r\n\r\n\tonUnmounted(() => {\r\n\t\tcodeStore.init()\r\n\t})\r\n\r\n\tconst scrolltolower = () => {\r\n\t\tloadMore();\r\n\t};\r\n\r\n\tconst loadMore = async () => {\r\n\t\tawait codeStore.getCodeList(keyword.value, langType.value);\r\n\t};\r\n\r\n\tconst onActive = async (item : { key : string; value : string }) => {\r\n\t\tlangType.value = item.value;\r\n\t\tcodeStore.init();\r\n\t\tawait loadMore();\r\n\t};\r\n\r\n\tconst onSearch = async () => {\r\n\t\tcodeStore.init();\r\n\t\tawait loadMore();\r\n\t};\r\n\r\n\tconst onClear = async () => {\r\n\t\tcodeStore.init();\r\n\t\tawait loadMore();\r\n\t};\r\n\r\n\tconst toDetail = (item : CodeItem) => {\r\n\t\t// @ts-ignore\r\n\t\tuni.navigateTo({\r\n\t\t\turl: `/pages/codesnippet/index?id=${item.id}`,\r\n\t\t});\r\n\t};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\t@import \"@/styles/index.scss\";\r\n\r\n\t.code-wrap {\r\n\t\tposition: relative;\r\n\t\tpadding: 0 10px;\r\n\t\tbox-sizing: border-box;\r\n\t\tbackground-color: $bg;\r\n\t\tmin-height: 100vh;\r\n\r\n\t\t.search {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: flex-start;\r\n\t\t\tflex-direction: column;\r\n\t\t\theight: 95px;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\tpadding-bottom: 10px;\r\n\r\n\t\t\t.code-type-list {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\theight: 30px;\r\n\t\t\t\tmin-height: 30px;\r\n\t\t\t\tborder-radius: 5px;\r\n\t\t\t\tbackground-color: #f2f2f2;\r\n\t\t\t\tmargin-top: 5px;\r\n\t\t\t\toverflow: hidden;\r\n\r\n\t\t\t\t.code-type-item {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tflex: 1;\r\n\t\t\t\t\theight: 100%;\r\n\r\n\t\t\t\t\t&::after {\r\n\t\t\t\t\t\tcontent: '';\r\n\t\t\t\t\t\theight: 20px;\r\n\t\t\t\t\t\tmargin-top: 5px;\r\n\t\t\t\t\t\twidth: 1px;\r\n\t\t\t\t\t\tdisplay: inline-block;\r\n\t\t\t\t\t\tbackground-color: $bc;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&:last-child {\r\n\t\t\t\t\t\t&::after {\r\n\t\t\t\t\t\t\tcontent: none;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.code-type {\r\n\t\t\t\t\t\tflex: 1;\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\t\theight: 100%;\r\n\t\t\t\t\t\ttransition: all 0.3s ease-in-out;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.active {\r\n\t\t\t\t\t\tbackground-color: #5782ff;\r\n\t\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.loading {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 0;\r\n\t\t\tleft: 0;\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100vh;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\r\n\t\t\t:deep {\r\n\t\t\t\t.u-loading-icon__text {\r\n\t\t\t\t\tfont-size: 18px !important;\r\n\t\t\t\t\tcolor: #5782ff !important;\r\n\t\t\t\t\tmargin-top: 15px !important;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.code-item {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\tborder-bottom: 1px solid $bc;\r\n\r\n\t\t\t.info {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\tpadding: 0 5px;\r\n\r\n\t\t\t\t.title-text {\r\n\t\t\t\t\tflex: 1;\r\n\t\t\t\t\tfont-size: 16px;\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\tpadding: 10px 0;\r\n\t\t\t\t\tfont-weight: 700;\r\n\t\t\t\t\tmargin-right: 10px;\r\n\t\t\t\t\t@include ellipsis;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.language {\r\n\t\t\t\t\tfont-size: 16px;\r\n\t\t\t\t\tcolor: #333;\r\n\t\t\t\t\t@include ellipsis;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.no-more {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 38px;\r\n\t\t\tcolor: #666;\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from '/Users/dnhyxc/Documents/miniprogram/dnhyxc/pages/code/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["useCodeStore","ref","computed","onMounted","onUnmounted","uni"],"mappings":";;;;;;;;;;;;;;;;;;;;AAmCC,UAAM,YAAYA,YAAAA;AAEZ,UAAA,UAAUC,kBAAI,EAAE;AAChB,UAAA,WAAWA,kBAAI,EAAE;AAEvB,UAAM,YAAY;AAAA,MACjB;AAAA,QACC,KAAK;AAAA,QACL,OAAO;AAAA,MACR;AAAA,MACA;AAAA,QACC,KAAK;AAAA,QACL,OAAO;AAAA,MACR;AAAA,MACA;AAAA,QACC,KAAK;AAAA,QACL,OAAO;AAAA,MACR;AAAA,MACA;AAAA,QACC,KAAK;AAAA,QACL,OAAO;AAAA,MACR;AAAA,MACA;AAAA,QACC,KAAK;AAAA,QACL,OAAO;AAAA,MACR;AAAA,IAAA;AAGK,UAAA,SAASC,cAAAA,SAAS,MAAM;AAC7B,YAAM,EAAE,OAAO,UAAU,SAAA,IAAa;AACtC,aAAO,SAAS,UAAU,SAAS,SAAS,UAAU,QAAQ;AAAA,IAAA,CAC9D;AAEDC,kBAAAA,UAAU,MAAM;AACN;IAAA,CACT;AAEDC,kBAAAA,YAAY,MAAM;AACjB,gBAAU,KAAK;AAAA,IAAA,CACf;AAED,UAAM,gBAAgB,MAAM;AAClB;IAAA;AAGV,UAAM,WAAW,YAAY;AAC5B,YAAM,UAAU,YAAY,QAAQ,OAAO,SAAS,KAAK;AAAA,IAAA;AAGpD,UAAA,WAAW,OAAO,SAA4C;AACnE,eAAS,QAAQ,KAAK;AACtB,gBAAU,KAAK;AACf,YAAM,SAAS;AAAA,IAAA;AAGhB,UAAM,WAAW,YAAY;AAC5B,gBAAU,KAAK;AACf,YAAM,SAAS;AAAA,IAAA;AAGhB,UAAM,UAAU,YAAY;AAC3B,gBAAU,KAAK;AACf,YAAM,SAAS;AAAA,IAAA;AAGV,UAAA,WAAW,CAAC,SAAoB;AAErCC,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,+BAA+B,KAAK,EAAE;AAAA,MAAA,CAC3C;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvGH,GAAG,WAAW,eAAe;"}