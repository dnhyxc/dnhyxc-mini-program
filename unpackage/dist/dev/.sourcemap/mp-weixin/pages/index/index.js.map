{"version":3,"file":"index.js","sources":["pages/index/index.vue","pages/index/index.vue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"home-wrap\">\r\n\t\t<div v-if=\"articleStore.loading\" class=\"loading\">\r\n\t\t\t<u-loading-icon vertical size=\"38\" text=\"正在加载中\" color=\"#5782ff\"></u-loading-icon>\r\n\t\t</div>\r\n\t\t<u-list lowerThreshold=\"10\" @scrolltolower=\"scrolltolower\">\r\n\t\t\t<u-list-item v-for=\"(item, index) in articleStore.articleList\" :key=\"index\">\r\n\t\t\t\t<div class=\"article-item\" @click=\"toDetail(item)\">\r\n\t\t\t\t\t<div class=\"image-wrap\">\r\n\t\t\t\t\t\t<image :src=\"item.coverImage\" class=\"cover\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"info\">\r\n\t\t\t\t\t\t<div class=\"title\">{{item.title}}</div>\r\n\t\t\t\t\t\t<div class=\"desc\">{{item.abstract}}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</u-list-item>\r\n\t\t\t<div v-if=\"noMore\" class=\"no-more\">没有更多了</div>\r\n\t\t</u-list>\r\n\t</view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n\timport { onMounted, computed } from 'vue';\r\n\timport { useArticleStore } from '../../stores/article'\r\n\timport { ArticleItem } from '../../typings';\r\n\r\n\tconst articleStore = useArticleStore()\r\n\r\n\tconst noMore = computed(() => {\r\n\t\tconst { total, articleList, pageSize } = articleStore\r\n\t\treturn articleList.length >= total && articleList.length && total > pageSize\r\n\t})\r\n\r\n\tonMounted(() => {\r\n\t\tloadMore();\r\n\t})\r\n\r\n\tconst scrolltolower = () => {\r\n\t\tloadMore();\r\n\t}\r\n\r\n\tconst loadMore = async () => {\r\n\t\tawait articleStore.getArticleList()\r\n\t}\r\n\r\n\tconst toDetail = (item : ArticleItem) => {\r\n\t\t// @ts-ignore\r\n\t\tuni.navigateTo({\r\n\t\t\turl: `/pages/detail/index?id=${item.id}` // 注意斜杠开头\r\n\t\t});\r\n\t}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\t@import '@/styles/index.scss';\r\n\r\n\t.home-wrap {\r\n\t\tposition: relative;\r\n\t\tpadding: 0 10px;\r\n\t\tbox-sizing: border-box;\r\n\t\tbackground-color: $bg;\r\n\t\tmin-height: 100vh;\r\n\r\n\t\t.loading {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 0;\r\n\t\t\tleft: 0;\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100vh;\r\n\t\t\tbackground-color: rgba(0, 0, 0, 0.1);\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\r\n\t\t\t:deep {\r\n\t\t\t\t.u-loading-icon__text {\r\n\t\t\t\t\tfont-size: 18px !important;\r\n\t\t\t\t\tcolor: #5782ff !important;\r\n\t\t\t\t\tmargin-top: 15px !important;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.article-item {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tpadding: 10px 0;\r\n\t\t\tbox-sizing: border-box;\r\n\r\n\t\t\t.image-wrap {\r\n\t\t\t\tbackground-color: #f5f5f5;\r\n\t\t\t\theight: 70px;\r\n\t\t\t\twidth: auto;\r\n\t\t\t\tmin-width: 70px;\r\n\t\t\t\tborder-radius: 5px;\r\n\t\t\t\tmargin-right: 10px;\r\n\r\n\t\t\t\t.cover {\r\n\t\t\t\t\twidth: auto;\r\n\t\t\t\t\theight: 70px;\r\n\t\t\t\t\tmin-width: 70px;\r\n\t\t\t\t\tobject-fit: cover;\r\n\t\t\t\t\tborder-radius: 5px; // 圆形裁剪\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.info {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\r\n\t\t\t\t.title {\r\n\t\t\t\t\tfont-size: 16px;\r\n\t\t\t\t\tfont-weight: 700;\r\n\t\t\t\t\tmargin-bottom: 10px;\r\n\t\t\t\t\t@include ellipsis;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.desc {\r\n\t\t\t\t\tfont-size: 14px;\r\n\t\t\t\t\t@include ellipsisMore(2);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.no-more {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 38px;\r\n\t\t\tcolor: #666;\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from '/Users/dnhyxc/Documents/miniprogram/dnhyxc/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["useArticleStore","computed","onMounted","uni"],"mappings":";;;;;;;;;;;;;;;;;;AA2BC,UAAM,eAAeA,eAAAA;AAEf,UAAA,SAASC,cAAAA,SAAS,MAAM;AAC7B,YAAM,EAAE,OAAO,aAAa,SAAA,IAAa;AACzC,aAAO,YAAY,UAAU,SAAS,YAAY,UAAU,QAAQ;AAAA,IAAA,CACpE;AAEDC,kBAAAA,UAAU,MAAM;AACN;IAAA,CACT;AAED,UAAM,gBAAgB,MAAM;AAClB;IAAA;AAGV,UAAM,WAAW,YAAY;AAC5B,YAAM,aAAa;IAAe;AAG7B,UAAA,WAAW,CAAC,SAAuB;AAExCC,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,0BAA0B,KAAK,EAAE;AAAA;AAAA,MAAA,CACtC;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjDH,GAAG,WAAW,eAAe;"}