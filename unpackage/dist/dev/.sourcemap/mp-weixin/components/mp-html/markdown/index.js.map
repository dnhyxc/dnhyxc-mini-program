{"version":3,"file":"index.js","sources":["components/mp-html/markdown/index.js"],"sourcesContent":["/**\r\n * @fileoverview markdown 插件\r\n * Include marked (https://github.com/markedjs/marked)\r\n * Include github-markdown-css (https://github.com/sindresorhus/github-markdown-css)\r\n */\r\nimport marked from './marked.min'\r\nlet index = 0\r\n\r\nfunction Markdown (vm) {\r\n  this.vm = vm\r\n  vm._ids = {}\r\n}\r\n\r\nMarkdown.prototype.onUpdate = function (content) {\r\n  if (this.vm.markdown) {\r\n    return marked(content)\r\n  }\r\n}\r\n\r\nMarkdown.prototype.onParse = function (node, vm) {\r\n  if (vm.options.markdown) {\r\n    // 中文 id 需要转换，否则无法跳转\r\n    if (vm.options.useAnchor && node.attrs && /[\\u4e00-\\u9fa5]/.test(node.attrs.id)) {\r\n      const id = 't' + index++\r\n      this.vm._ids[node.attrs.id] = id\r\n      node.attrs.id = id\r\n    }\r\n    if (node.name === 'p' || node.name === 'table' || node.name === 'tr' || node.name === 'th' || node.name === 'td' || node.name === 'blockquote' || node.name === 'pre' || node.name === 'code') {\r\n      node.attrs.class = `md-${node.name} ${node.attrs.class || ''}`\r\n    }\r\n  }\r\n}\r\n\r\nexport default Markdown\r\n"],"names":["marked"],"mappings":";;AAMA,IAAI,QAAQ;AAEZ,SAAS,SAAU,IAAI;AACrB,OAAK,KAAK;AACV,KAAG,OAAO,CAAE;AACd;AAEA,SAAS,UAAU,WAAW,SAAU,SAAS;AAC/C,MAAI,KAAK,GAAG,UAAU;AACpB,WAAOA,sCAAAA,OAAO,OAAO;AAAA,EACtB;AACH;AAEA,SAAS,UAAU,UAAU,SAAU,MAAM,IAAI;AAC/C,MAAI,GAAG,QAAQ,UAAU;AAEvB,QAAI,GAAG,QAAQ,aAAa,KAAK,SAAS,kBAAkB,KAAK,KAAK,MAAM,EAAE,GAAG;AAC/E,YAAM,KAAK,MAAM;AACjB,WAAK,GAAG,KAAK,KAAK,MAAM,EAAE,IAAI;AAC9B,WAAK,MAAM,KAAK;AAAA,IACjB;AACD,QAAI,KAAK,SAAS,OAAO,KAAK,SAAS,WAAW,KAAK,SAAS,QAAQ,KAAK,SAAS,QAAQ,KAAK,SAAS,QAAQ,KAAK,SAAS,gBAAgB,KAAK,SAAS,SAAS,KAAK,SAAS,QAAQ;AAC7L,WAAK,MAAM,QAAQ,MAAM,KAAK,IAAI,IAAI,KAAK,MAAM,SAAS,EAAE;AAAA,IAC7D;AAAA,EACF;AACH;;"}