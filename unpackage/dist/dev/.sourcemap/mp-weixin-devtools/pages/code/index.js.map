{"version":3,"file":"index.js","sources":["index.vue","index.vue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"home-wrap\">\r\n\t\t<div v-if=\"codeStore.loading\" class=\"loading\">\r\n\t\t\t<u-loading-icon\r\n\t\t\t\tvertical\r\n\t\t\t\tsize=\"38\"\r\n\t\t\t\ttext=\"正在加载中\"\r\n\t\t\t\tcolor=\"#5782ff\"\r\n\t\t\t></u-loading-icon>\r\n\t\t</div>\r\n\t\t<u-list lowerThreshold=\"10\" @scrolltolower=\"scrolltolower\">\r\n\t\t\t<u-list-item v-for=\"(item, index) in codeStore.codeList\" :key=\"index\">\r\n\t\t\t\t<div class=\"article-item\" @click=\"toDetail(item)\">\r\n\t\t\t\t\t<div class=\"info\">\r\n\t\t\t\t\t\t<div class=\"title\">{{ item.title }}</div>\r\n\t\t\t\t\t\t<div class=\"desc\">{{ item.abstract }}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</u-list-item>\r\n\t\t\t<div v-if=\"noMore\" class=\"no-more\">没有更多了</div>\r\n\t\t</u-list>\r\n\t</view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { onMounted, computed } from \"vue\";\r\nimport { useCodeStore } from \"../../stores/code\";\r\nimport { CodeItem } from \"../../typings\";\r\n\r\nconst codeStore = useCodeStore();\r\n\r\nconst noMore = computed(() => {\r\n\tconst { total, codeList, pageSize } = codeStore;\r\n\treturn codeList.length >= total && codeList.length && total > pageSize;\r\n});\r\n\r\nonMounted(() => {\r\n\tloadMore();\r\n});\r\n\r\nconst scrolltolower = () => {\r\n\tloadMore();\r\n};\r\n\r\nconst loadMore = async () => {\r\n\tawait codeStore.getCodeList();\r\n};\r\n\r\nconst toDetail = (item: CodeItem) => {\r\n\t// @ts-ignore\r\n\tuni.navigateTo({\r\n\t\turl: `/pages/detail/index?id=${item.id}`, // 注意斜杠开头\r\n\t});\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import \"@/styles/index.scss\";\r\n\r\n.home-wrap {\r\n\tposition: relative;\r\n\tpadding: 0 10px;\r\n\tbox-sizing: border-box;\r\n\tbackground-color: $bg;\r\n\tmin-height: 100vh;\r\n\r\n\t.loading {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100vh;\r\n\t\tbackground-color: rgba(0, 0, 0, 0.1);\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\r\n\t\t:deep {\r\n\t\t\t.u-loading-icon__text {\r\n\t\t\t\tfont-size: 18px !important;\r\n\t\t\t\tcolor: #5782ff !important;\r\n\t\t\t\tmargin-top: 15px !important;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.article-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tpadding: 10px 0;\r\n\t\tbox-sizing: border-box;\r\n\r\n\t\t.info {\r\n\t\t\tflex: 1;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\r\n\t\t\t.title {\r\n\t\t\t\tfont-size: 16px;\r\n\t\t\t\tfont-weight: 700;\r\n\t\t\t\tmargin-bottom: 10px;\r\n\t\t\t\t@include ellipsis;\r\n\t\t\t}\r\n\r\n\t\t\t.desc {\r\n\t\t\t\tfont-size: 14px;\r\n\t\t\t\t@include ellipsisMore(2);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.no-more {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\twidth: 100%;\r\n\t\theight: 38px;\r\n\t\tcolor: #666;\r\n\t}\r\n}\r\n</style>\r\n","import MiniProgramPage from '/Users/dnhyxc/Documents/miniprogram/dnhyxc/pages/code/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["useCodeStore","computed","onMounted","uni"],"mappings":";;;;;;;;;;;;;;;;;;;AA6BA,UAAM,YAAYA,YAAAA;AAEZ,UAAA,SAASC,cAAAA,SAAS,MAAM;AAC7B,YAAM,EAAE,OAAO,UAAU,SAAA,IAAa;AACtC,aAAO,SAAS,UAAU,SAAS,SAAS,UAAU,QAAQ;AAAA,IAAA,CAC9D;AAEDC,kBAAAA,UAAU,MAAM;AACN;IAAA,CACT;AAED,UAAM,gBAAgB,MAAM;AAClB;IAAA;AAGV,UAAM,WAAW,YAAY;AAC5B,YAAM,UAAU;IAAY;AAGvB,UAAA,WAAW,CAAC,SAAmB;AAEpCC,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,0BAA0B,KAAK,EAAE;AAAA;AAAA,MAAA,CACtC;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnDF,GAAG,WAAW,eAAe;"}